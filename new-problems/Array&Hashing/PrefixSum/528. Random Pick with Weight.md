# 528. Random Pick with Weight

**LeetCode:** {https://leetcode.com/problems/random-pick-with-weight/description/?envType=company&envId=two-sigma&favoriteSlug=two-sigma-all}  
**Date:** {2026-01-22}  
**Status:** âŒ Stuck / ðŸ” Redo  
**Difficulty:** Medium
**Tags/Pattern:** {Arrays, Prefix Sum, Math}  
**Time/Space:** O(n) / O(n)

---

## 1) Problem in 1 line

Randomly return an index from the array such that each index is chosen with probability proportional to its weight.
Explain the problem in one sentence.

---

## 2) My first thought (before coding)

no idea
What I tried first, and why.

---

## 3) Mistakes / Confusions (Error Notebook í•µì‹¬)

- Mistake #1:
- Mistake #2:
- What I learned:
  **What I learned:**
  Using `random.random()` generates a uniform decimal value in the range **[0, 1)**, and by scaling it with the total weight, we can map this random value into weighted intervals using prefix sums to simulate probability-based selection.

---

## 4) Final approach (in plain English)

- First, build a prefix sum array so weights turn into ranges (for [1,3], this becomes [1,4]).
- This means index 0 owns the range [0,1) and index 1 owns [1,4).
- Generate a random number in [0, totalSum) using random.random() \* totalSum.
- Find the first prefix sum that is greater than the random number.
- Return that index, because the random number fell inside its range.
  Steps of the solution like youâ€™d explain to a friend.

---

## 5) Code (final)

```python
class Solution:
    def __init__(self, w: List[int]):
        self.prefix_sum=[]
        prefix_sum=0
        for weights in w:
            prefix_sum+=weights
            self.prefix_sum.append(prefix_sum)
        self.tot_sum=prefix_sum

    def pickIndex(self) -> int:
        target=self.tot_sum*random.random()
        for i, prefix in enumerate(self.prefix_sum):
            if target<prefix:
                return i
# paste final accepted code here
```
